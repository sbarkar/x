{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport styles from '@/styles/System/Taskbar/StartMenu.module.scss';\nimport ButtonBar from '@/components/System/Taskbar/ButtonBar';\nimport FileManager from '@/components/System/FileManager/FileManager';\nimport MenuView from '@/components/System/FileManager/MenuView';\nimport { createPortal } from 'react-dom';\nimport { faWindows } from '@fortawesome/free-brands-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { getNextContainerElement } from '@/utils/elements';\nimport { useEffect, useRef, useState } from 'react';\n\nconst StartMenu = ({\n  taskbarRef\n}) => {\n  const {\n    0: showMenu,\n    1: setShowMenu\n  } = useState(false);\n  const startButtonRef = useRef(null);\n  const menuRef = useRef(null);\n  const buttonsRef = useRef(null);\n  const {\n    0: mounted,\n    1: setMounted\n  } = useState(false);\n  useEffect(() => setMounted(true), []);\n  return mounted ? /*#__PURE__*/createPortal( /*#__PURE__*/_jsxs(_Fragment, {\n    children: [showMenu && /*#__PURE__*/_jsxs(\"nav\", {\n      className: styles.menu,\n      ref: menuRef,\n      tabIndex: -1,\n      children: [/*#__PURE__*/_jsx(ButtonBar, {\n        startButtonRef: startButtonRef,\n        buttonsRef: buttonsRef,\n        setShowMenu: setShowMenu\n      }), /*#__PURE__*/_jsx(FileManager, {\n        path: \"/start\",\n        render: MenuView,\n        onChange: cwd => !cwd && setShowMenu(false)\n      })]\n    }), /*#__PURE__*/_jsx(\"button\", {\n      ref: startButtonRef,\n      className: `${styles.start} ${showMenu && styles.menuOpen}`,\n      type: \"button\",\n      title: \"Start\",\n      onClick: () => setShowMenu(!showMenu),\n      onBlur: ({\n        relatedTarget\n      }) => {\n        var _menuRef$current, _buttonsRef$current;\n\n        if (taskbarRef.current === relatedTarget || ((_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : _menuRef$current.contains(relatedTarget))) {\n          var _startButtonRef$curre;\n\n          startButtonRef === null || startButtonRef === void 0 ? void 0 : (_startButtonRef$curre = startButtonRef.current) === null || _startButtonRef$curre === void 0 ? void 0 : _startButtonRef$curre.focus();\n        } else if (!((_buttonsRef$current = buttonsRef.current) === null || _buttonsRef$current === void 0 ? void 0 : _buttonsRef$current.contains(relatedTarget))) {\n          setShowMenu(false);\n        }\n      },\n      children: /*#__PURE__*/_jsx(FontAwesomeIcon, {\n        icon: faWindows\n      })\n    })]\n  }), getNextContainerElement()) : null;\n};\n\nexport default StartMenu;","map":null,"metadata":{},"sourceType":"module"}